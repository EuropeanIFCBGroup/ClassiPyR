<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>FAQ &amp; Troubleshooting • ClassiPyR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="FAQ &amp; Troubleshooting">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ClassiPyR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/user-guide.html">User Guide</a></li>
    <li><a class="dropdown-item" href="../articles/class-management.html">Class List Management</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ &amp; Troubleshooting</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/EuropeanIFCBGroup/ClassiPyR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>FAQ &amp; Troubleshooting</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/EuropeanIFCBGroup/ClassiPyR/blob/v0.1.1/vignettes/faq.Rmd" class="external-link"><code>vignettes/faq.Rmd</code></a></small>
      <div class="d-none name"><code>faq.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="frequently-asked-questions">Frequently Asked Questions<a class="anchor" aria-label="anchor" href="#frequently-asked-questions"></a>
</h2>
<hr>
<div class="section level3">
<h3 id="general">General<a class="anchor" aria-label="anchor" href="#general"></a>
</h3>
<p><strong>Q: What IFCB data formats are supported?</strong></p>
<p>A: The app reads standard IFCB files:</p>
<ul>
<li>ROI files (.roi) - Image data</li>
<li>ADC files (.adc) - Metadata (dimensions, timestamps)</li>
<li>HDR files (.hdr) - Header information</li>
</ul>
<p><strong>Q: Can I use this for non-IFCB data?</strong></p>
<p>A: The app is specifically designed for IFCB data format. For other
imaging systems, you would need to adapt the data loading functions.</p>
<p><strong>Q: Is my data modified?</strong></p>
<p>A: No. The app only reads your original files. All output is written
to separate folders.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="installation-issues">Installation Issues<a class="anchor" aria-label="anchor" href="#installation-issues"></a>
</h2>
<p><strong>Q: I see “Python not available” warning</strong></p>
<p>A: This warning only appears when your storage format includes
<code>.mat</code> files. Python is <strong>not needed</strong> for the
default SQLite storage.</p>
<p>If you see this warning and don’t need <code>.mat</code> files,
switch to SQLite in Settings &gt; Annotation Storage. Otherwise, to
enable <code>.mat</code> support:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://europeanifcbgroup.github.io/iRfcb/" class="external-link">iRfcb</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://europeanifcbgroup.github.io/iRfcb/reference/ifcb_py_install.html" class="external-link">ifcb_py_install</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Creates venv in current working directory</span></span></code></pre></div>
<p>Then restart the app.</p>
<p><strong>Q: Do I need Python to use ClassiPyR?</strong></p>
<p>A: No. The default storage format is SQLite, which works out of the
box with no Python dependency. Python is only needed if you want to
export <code>.mat</code> files for <a href="https://github.com/hsosik/ifcb-analysis" class="external-link">ifcb-analysis</a>
compatibility.</p>
<p><strong>Q: Where is the Python virtual environment
created?</strong></p>
<p>A: By default, <code><a href="https://europeanifcbgroup.github.io/iRfcb/reference/ifcb_py_install.html" class="external-link">ifcb_py_install()</a></code> creates a
<code>venv</code> folder in your home directory. You can specify a
different location:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://europeanifcbgroup.github.io/iRfcb/reference/ifcb_py_install.html" class="external-link">ifcb_py_install</a></span><span class="op">(</span><span class="st">"/path/to/your/venv"</span><span class="op">)</span></span></code></pre></div>
<p>You can also specify the venv path when launching the app:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_app.html">run_app</a></span><span class="op">(</span>venv_path <span class="op">=</span> <span class="st">"/path/to/your/venv"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q: How is the Python virtual environment path
resolved?</strong></p>
<p>A: The app uses the following priority order:</p>
<ol style="list-style-type: decimal">
<li>
<strong><code>venv_path</code> argument</strong> passed to
<code><a href="../reference/run_app.html">run_app()</a></code> (highest priority)</li>
<li>
<strong>Saved settings</strong> from a previous session (stored in
<code>settings.json</code>)</li>
<li>
<strong>Default</strong> <code>./venv</code> in the working
directory</li>
</ol>
<p>When you specify <code>run_app(venv_path = "/path/to/venv")</code>,
that path is used for Python initialization and pre-filled in the
Settings dialog, overriding any previously saved path.</p>
<p><strong>Q: Package installation fails</strong></p>
<p>A: Make sure you have remotes installed and try:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"remotes"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"EuropeanIFCBGroup/ClassiPyR"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q: “Could not find app directory” error</strong></p>
<p>A: Try reinstalling the package:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"iRfcb"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q: iRfcb won’t install</strong></p>
<p>A: <a href="https://github.com/EuropeanIFCBGroup/iRfcb" class="external-link">iRfcb</a> is
the core dependency for <code>ClassiPyR</code> and is installed
automatically. If you encounter issues:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"iRfcb"</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="data-loading">Data Loading<a class="anchor" aria-label="anchor" href="#data-loading"></a>
</h2>
<p><strong>Q: No samples appear in the dropdown</strong></p>
<p>A: Check that:</p>
<ol style="list-style-type: decimal">
<li>ROI Data Folder points to your data</li>
<li>ROI files exist and are readable</li>
<li>Click the <strong>Sync</strong> button (circular arrow icon) to
rescan folders if you recently added new data</li>
</ol>
<p><strong>Q: “ROI file not found” error</strong></p>
<p>A: The app scans the ROI Data Folder recursively, so any subfolder
layout works (including flat). Check that:</p>
<ol style="list-style-type: decimal">
<li>The ROI Data Folder path is correct</li>
<li>Each <code>.roi</code> file has a matching <code>.adc</code> file in
the same directory</li>
<li>Filenames follow the IFCB naming convention
(<code>DYYYYMMDDTHHMMSS_IFCBNNN</code>)</li>
<li>Click the <strong>Sync</strong> button to rescan if you recently
moved or added files</li>
</ol>
<p><strong>Q: Classifications not loading</strong></p>
<p>A: For CSV files:</p>
<ul>
<li>Must have columns named <code>file_name</code> and
<code>class_name</code> (exact names required)</li>
<li>Optionally include a <code>score</code> column (confidence value
between 0 and 1)</li>
<li>The CSV file must be named after the sample (e.g.,
<code>D20230101T120000_IFCB134.csv</code>)</li>
<li>File should be in the Classification Folder (indexed via file cache;
click Sync to refresh)</li>
</ul>
<p>For MAT files:</p>
<ul>
<li>Must match pattern <code>*_class*.mat</code>
</li>
<li>Must contain <code>roinum</code> and <code>TBclass</code>
variables</li>
<li>Must contain <code>roinum</code> and <code>TBclass</code>
variables</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="csv-format">CSV Format<a class="anchor" aria-label="anchor" href="#csv-format"></a>
</h2>
<p><strong>Q: What should my classification CSV look like?</strong></p>
<p>A: The CSV must have columns named <code>file_name</code> and
<code>class_name</code>. The file must be named after the sample (e.g.,
<code>D20230101T120000_IFCB134.csv</code>).</p>
<p>Minimal example:</p>
<pre><code>file_name,class_name
D20230101T120000_IFCB134_00001.png,Diatom
D20230101T120000_IFCB134_00002.png,Ciliate</code></pre>
<p>With optional <code>score</code> column (confidence values between 0
and 1):</p>
<pre><code>file_name,class_name,score
D20230101T120000_IFCB134_00001.png,Diatom,0.95
D20230101T120000_IFCB134_00002.png,Ciliate,0.87
D20230101T120000_IFCB134_00003.png,Dinoflagellate,0.72</code></pre>
<p><strong>Q: My CNN classifier outputs different column
names</strong></p>
<p>A: The column names must be exactly <code>file_name</code> and
<code>class_name</code>. If your classifier uses different names, rename
the columns before loading. For example in R:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"my_classifications.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">==</span> <span class="st">"predicted_class"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"class_name"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">==</span> <span class="st">"filename"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"file_name"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"D20230101T120000_IFCB134.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="annotation">Annotation<a class="anchor" aria-label="anchor" href="#annotation"></a>
</h2>
<p><strong>Q: Drag-select isn’t working</strong></p>
<p>A: Make sure you’re:</p>
<ol style="list-style-type: decimal">
<li>Starting the drag in the gallery area (not on an image)</li>
<li>Using left mouse button</li>
<li>Dragging far enough (&gt;5 pixels)</li>
</ol>
<p><strong>Q: Images show as “Not found”</strong></p>
<p>A: The ROI might be empty (no actual image data). These are filtered
out automatically on load.</p>
<p><strong>Q: Changes aren’t being saved</strong></p>
<p>A: Check that:</p>
<ol style="list-style-type: decimal">
<li>Output folder is writable</li>
<li>If using MAT format: Python is available (not needed for default
SQLite storage)</li>
<li>Click “Save Annotations” before closing</li>
</ol>
<hr>
</div>
<div class="section level2">
<h2 id="class-list">Class List<a class="anchor" aria-label="anchor" href="#class-list"></a>
</h2>
<p><strong>Q: Do I need to upload a class list file to start
annotating?</strong></p>
<p>A: No! You can create a class list from scratch directly in the
app:</p>
<ol style="list-style-type: decimal">
<li>Open Settings → Edit Class List (no file upload needed)</li>
<li>Add classes one at a time or paste multiple classes in the text
area</li>
<li>Click Apply Changes - a temporary file is created automatically</li>
<li>Start annotating immediately</li>
<li>Remember to Save as .mat or .txt for future sessions</li>
</ol>
<p><strong>Q: How do I create a class list from scratch?</strong></p>
<p>A:</p>
<ol style="list-style-type: decimal">
<li>Open Settings → Edit Class List</li>
<li>Add classes using “Add new class” field, or type/paste classes in
the text area</li>
<li>Click Apply Changes</li>
<li>Save as .mat or .txt for future use</li>
</ol>
<p><strong>Q: Can I import a class list from MATLAB?</strong></p>
<p>A: Yes, load your existing <code>class2use.mat</code> file via
Settings.</p>
<p><strong>Q: My class names look different after loading</strong></p>
<p>A: The app may truncate trailing numbers from class names (e.g.,
“Diatom_01” → “Diatom”). This matches iRfcb behavior.</p>
<p><strong>Q: Why are some characters in my class names
changed?</strong></p>
<p>A: Class names are used as folder names when exporting PNGs, so
certain characters must be sanitized:</p>
<table class="table">
<thead><tr class="header">
<th>Character</th>
<th>Reason</th>
<th>Action</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>/</code> or <code>\</code>
</td>
<td>Path separators</td>
<td>Replaced with <code>_</code>
</td>
</tr>
<tr class="even">
<td><code>&lt; &gt; " ' &amp;</code></td>
<td>HTML/security risks</td>
<td>Removed</td>
</tr>
<tr class="odd">
<td><code>: * ? \|</code></td>
<td>Windows filesystem</td>
<td>Removed</td>
</tr>
<tr class="even">
<td><code>..</code></td>
<td>Path traversal risk</td>
<td>Removed</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>: <code>Snowella/Woronichinia</code> becomes
<code>Snowella_Woronichinia</code></p>
<p>Common taxonomic characters like hyphens (<code>-</code>),
underscores (<code>_</code>), periods (<code>.</code>), and spaces are
preserved.</p>
<hr>
</div>
<div class="section level2">
<h2 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p><strong>Q: Where are my annotations saved?</strong></p>
<p>A: Annotations are split across two locations:</p>
<ul>
<li>
<strong>SQLite database</strong> (default): stored in the
<strong>Database Folder</strong> (a local directory)</li>
<li>
<strong>MAT files and statistics</strong>: stored in the
<strong>Output Folder</strong> (can be on a network drive)</li>
</ul>
<pre><code>db_folder/                           ← local drive (Database Folder)
└── annotations.sqlite              ← single database for ALL samples

output_folder/                       ← can be a network drive (Output Folder)
├── D20230101T120000_IFCB134.mat    ← only if storage format includes "MAT"
├── D20230202T080000_IFCB134.mat
└── validation_statistics/
    ├── ..._validation_stats.csv
    └── ..._validation_detailed.csv</code></pre>
<p>By default, the database is stored in a persistent local directory
(<code>tools::R_user_dir("ClassiPyR", "data")</code>). Back up
<code>annotations.sqlite</code> to preserve your work.</p>
<p><strong>Q: Where is the default database location?</strong></p>
<p>A: The default Database Folder is a platform-specific local
directory:</p>
<ul>
<li>
<strong>Linux</strong>:
<code>~/.local/share/R/ClassiPyR/</code>
</li>
<li>
<strong>macOS</strong>:
<code>~/Library/Application Support/org.R-project.R/R/ClassiPyR/</code>
</li>
<li>
<strong>Windows</strong>:
<code>%LOCALAPPDATA%/R/data/R/ClassiPyR/</code>
</li>
</ul>
<p>You can find the exact path with:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ClassiPyR</span><span class="fu">::</span><span class="fu"><a href="../reference/get_default_db_dir.html">get_default_db_dir</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can change it in Settings &gt; Database Folder, but it should
always be a local drive.</p>
<p><strong>Q: Can I put the database on a network drive?</strong></p>
<p>A: No. SQLite databases are <a href="https://www.sqlite.org/useovernet.html" class="external-link">not safe on network
filesystems</a> (NFS, SMB/CIFS) because network file locking is
unreliable, which can lead to database corruption. Always keep the
Database Folder on a local drive. The Output Folder (for MAT files and
statistics) can safely be on a network drive.</p>
<p><strong>Q: How do I transfer my annotations to another
computer?</strong></p>
<p>A: Since the SQLite database is stored locally, you cannot simply
share it over a network drive. Instead, use <code>.mat</code> files as
the interchange format:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Export</strong> from the source computer (requires Python
with scipy):</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://EuropeanIFCBGroup.github.io/ClassiPyR/" class="external-link">ClassiPyR</a></span><span class="op">)</span></span>
<span><span class="va">db_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_db_path.html">get_db_path</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_default_db_dir.html">get_default_db_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Export all annotations to .mat files in a shared output folder</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_all_db_to_mat.html">export_all_db_to_mat</a></span><span class="op">(</span><span class="va">db_path</span>, <span class="st">"/shared/network/manual"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">success</span>, <span class="st">"exported\n"</span><span class="op">)</span></span></code></pre></div>
<p>Or use the <strong>Export SQLite → .mat</strong> button in
Settings.</p>
<ol start="2" style="list-style-type: decimal">
<li>
<strong>Import</strong> on the target computer:</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://EuropeanIFCBGroup.github.io/ClassiPyR/" class="external-link">ClassiPyR</a></span><span class="op">)</span></span>
<span><span class="va">class2use</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_class_list.html">load_class_list</a></span><span class="op">(</span><span class="st">"/shared/network/class2use.mat"</span><span class="op">)</span></span>
<span><span class="va">db_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_db_path.html">get_db_path</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_default_db_dir.html">get_default_db_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Import .mat files from the shared folder into the local database</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_all_mat_to_db.html">import_all_mat_to_db</a></span><span class="op">(</span><span class="st">"/shared/network/manual"</span>, <span class="va">db_path</span>, <span class="va">class2use</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">success</span>, <span class="st">"imported,"</span>, <span class="va">result</span><span class="op">$</span><span class="va">skipped</span>, <span class="st">"skipped\n"</span><span class="op">)</span></span></code></pre></div>
<p>Or use the <strong>Import .mat → SQLite</strong> button in Settings.
Already-imported samples are skipped automatically.</p>
<p>You can also simply copy the <code>annotations.sqlite</code> file
directly between machines if you prefer.</p>
<p><strong>Q: Can I import annotations back to MATLAB?</strong></p>
<p>A: Yes, if you save with the “MAT file” or “Both” storage format, the
MAT files are compatible with the <a href="https://github.com/hsosik/ifcb-analysis" class="external-link">ifcb-analysis</a> toolbox
(Sosik &amp; Olson, 2007). Use the list in <code>startMC</code>, or load
the list in MATLAB using:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="va">load</span>(<span class="ss">'sample_name.mat'</span>)<span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co">% classlist contains [roi_number, class_index]</span></span></code></pre></div>
<p>Note: Python with <code>scipy</code> must be installed to save .mat
files. Change the storage format in Settings &gt; Annotation
Storage.</p>
<p><strong>Q: Can I migrate existing .mat annotations to the SQLite
database?</strong></p>
<p>A: Yes. The easiest way is the <strong>Import .mat → SQLite</strong>
button in Settings &gt; Annotation Storage, which bulk-imports all
<code>.mat</code> files in your output folder.</p>
<p>You can also import programmatically — a single file:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://EuropeanIFCBGroup.github.io/ClassiPyR/" class="external-link">ClassiPyR</a></span><span class="op">)</span></span>
<span><span class="va">class2use</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_class_list.html">load_class_list</a></span><span class="op">(</span><span class="st">"/path/to/class2use.mat"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/import_mat_to_db.html">import_mat_to_db</a></span><span class="op">(</span></span>
<span>  mat_path <span class="op">=</span> <span class="st">"/data/manual/D20230101T120000_IFCB134.mat"</span>,</span>
<span>  db_path <span class="op">=</span> <span class="fu"><a href="../reference/get_db_path.html">get_db_path</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_default_db_dir.html">get_default_db_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  sample_name <span class="op">=</span> <span class="st">"D20230101T120000_IFCB134"</span>,</span>
<span>  class2use <span class="op">=</span> <span class="va">class2use</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Or bulk-import all <code>.mat</code> files in a folder:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_all_mat_to_db.html">import_all_mat_to_db</a></span><span class="op">(</span><span class="st">"/data/manual"</span>, <span class="fu"><a href="../reference/get_db_path.html">get_db_path</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_default_db_dir.html">get_default_db_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="va">class2use</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">success</span>, <span class="st">"imported,"</span>, <span class="va">result</span><span class="op">$</span><span class="va">failed</span>, <span class="st">"failed,"</span>, <span class="va">result</span><span class="op">$</span><span class="va">skipped</span>, <span class="st">"skipped\n"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q: Can I export SQLite annotations back to .mat
files?</strong></p>
<p>A: Yes. Use the <strong>Export SQLite → .mat</strong> button in
Settings &gt; Annotation Storage to export all annotated samples at
once. This requires Python with scipy.</p>
<p>You can also export programmatically:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Single sample</span></span>
<span><span class="fu"><a href="../reference/export_db_to_mat.html">export_db_to_mat</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_db_path.html">get_db_path</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_default_db_dir.html">get_default_db_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="st">"D20230101T120000_IFCB134"</span>, <span class="st">"/data/manual"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># All samples</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_all_db_to_mat.html">export_all_db_to_mat</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_db_path.html">get_db_path</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_default_db_dir.html">get_default_db_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="st">"/data/manual"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">success</span>, <span class="st">"exported,"</span>, <span class="va">result</span><span class="op">$</span><span class="va">failed</span>, <span class="st">"failed\n"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q: Can I change the annotator name for existing
annotations?</strong></p>
<p>A: Yes. Use <code><a href="../reference/update_annotator.html">update_annotator()</a></code> from the R console:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://EuropeanIFCBGroup.github.io/ClassiPyR/" class="external-link">ClassiPyR</a></span><span class="op">)</span></span>
<span><span class="va">db_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_db_path.html">get_db_path</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_default_db_dir.html">get_default_db_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update a single sample</span></span>
<span><span class="fu"><a href="../reference/update_annotator.html">update_annotator</a></span><span class="op">(</span><span class="va">db_path</span>, <span class="st">"D20230101T120000_IFCB134"</span>, <span class="st">"Jane"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update several samples at once</span></span>
<span><span class="fu"><a href="../reference/update_annotator.html">update_annotator</a></span><span class="op">(</span><span class="va">db_path</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sample_A"</span>, <span class="st">"sample_B"</span><span class="op">)</span>, <span class="st">"Jane"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update all annotated samples (e.g. after a bulk import)</span></span>
<span><span class="va">all_samples</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_annotated_samples_db.html">list_annotated_samples_db</a></span><span class="op">(</span><span class="va">db_path</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/update_annotator.html">update_annotator</a></span><span class="op">(</span><span class="va">db_path</span>, <span class="va">all_samples</span>, <span class="st">"Jane"</span><span class="op">)</span></span></code></pre></div>
<p>The function returns a named vector showing how many annotation rows
were updated per sample (0 means the sample was not found in the
database).</p>
<p><strong>Q: What’s in the statistics CSV?</strong></p>
<p>A: Two files per sample:</p>
<ol style="list-style-type: decimal">
<li>
<code>*_validation_stats.csv</code> - Summary statistics</li>
<li>
<code>*_validation_detailed.csv</code> - Per-image details</li>
</ol>
<hr>
</div>
<div class="section level2">
<h2 id="measurement">Measurement<a class="anchor" aria-label="anchor" href="#measurement"></a>
</h2>
<p><strong>Q: How do I measure images?</strong></p>
<p>A: Click the Measure button (ruler icon) in the toolbar to activate
measure mode. Then click and drag on any image to draw a measurement
line. The distance is displayed in micrometers and pixels.</p>
<p><strong>Q: How do I change the scale calibration?</strong></p>
<p>A: Open Settings and find “Pixels per Micrometer”. The default is 3.4
(standard for IFCB). Enter your instrument’s calibration value.</p>
<hr>
</div>
<div class="section level2">
<h2 id="settings-persistence">Settings &amp; Persistence<a class="anchor" aria-label="anchor" href="#settings-persistence"></a>
</h2>
<p><strong>Q: Are my settings saved between sessions?</strong></p>
<p>A: Yes! Settings are stored in a configuration file:</p>
<ul>
<li>
<strong>Linux</strong>:
<code>~/.config/R/ClassiPyR/settings.json</code>
</li>
<li>
<strong>macOS</strong>:
<code>~/Library/Preferences/org.R-project.R/R/ClassiPyR/settings.json</code>
</li>
<li>
<strong>Windows</strong>:
<code>%APPDATA%/R/config/R/ClassiPyR/settings.json</code>
</li>
</ul>
<p>Folder paths, class list location, and Python venv path are
automatically restored when you restart the app.</p>
<p><strong>Q: How do I reset all settings to defaults?</strong></p>
<p>A: Use the <code>reset_settings</code> argument when launching the
app:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_app.html">run_app</a></span><span class="op">(</span>reset_settings <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>This deletes the saved <code>settings.json</code> file and starts the
app with default values. All folder paths, the class list reference, and
the Python venv path are cleared, so you will need to reconfigure them.
The class list file itself (<code>class2use_saved.*</code>) is not
deleted from the config directory but will not be loaded until you
re-upload it. This is useful if:</p>
<ul>
<li>The app fails to start due to invalid saved paths</li>
<li>Folder paths point to locations that no longer exist</li>
<li>You want a clean slate after changing your data layout</li>
</ul>
<p>You can also combine it with other arguments:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reset settings and specify a new Python environment</span></span>
<span><span class="fu"><a href="../reference/run_app.html">run_app</a></span><span class="op">(</span>reset_settings <span class="op">=</span> <span class="cn">TRUE</span>, venv_path <span class="op">=</span> <span class="st">"/path/to/your/venv"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q: What’s the yellow warning on some classes?</strong></p>
<p>A: Classes marked with a warning are in your classification data but
not in your class list. This can happen when:</p>
<ul>
<li>Loading classifications from a classifier trained with a different
class list</li>
<li>The class list has been modified since the classification was
created</li>
</ul>
<p>You can still work with these classes, but consider adding them to
your class list for consistency.</p>
<p><strong>Q: A sample shows both annotation and classification markers
- what does that mean?</strong></p>
<p>A: This sample has both manual annotations AND auto-classifications
available. When you load it:</p>
<ul>
<li>The app defaults to manual annotation mode</li>
<li>You can switch to validation mode using the button in the
header</li>
<li>Each mode maintains its state independently</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="file-index-cache">File Index Cache<a class="anchor" aria-label="anchor" href="#file-index-cache"></a>
</h2>
<p><strong>Q: What is the file index cache?</strong></p>
<p>A: The file index cache stores the locations of all IFCB files (ROI,
classification, annotation) found in your configured folders. It’s saved
to disk so the app doesn’t need to re-scan your entire folder hierarchy
every time it starts. This significantly speeds up startup for large
datasets.</p>
<p><strong>Q: How do I refresh the file cache?</strong></p>
<p>A: Click the <strong>Sync</strong> button (circular arrow icon) in
the sidebar, next to the sample navigation buttons. The cache age
indicator below shows when the last scan occurred.</p>
<p><strong>Q: New samples I added aren’t showing up</strong></p>
<p>A: The app loads from the cached file index. Click the
<strong>Sync</strong> button to rescan your folders and pick up new
files.</p>
<p><strong>Q: Can I update the cache without opening the
app?</strong></p>
<p>A: Yes. Use <code><a href="../reference/rescan_file_index.html">rescan_file_index()</a></code> from the R console or a
scheduled script:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ClassiPyR</span><span class="fu">::</span><span class="fu"><a href="../reference/rescan_file_index.html">rescan_file_index</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This reads folder paths from your saved settings and rebuilds the
cache. You can also pass paths explicitly:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ClassiPyR</span><span class="fu">::</span><span class="fu"><a href="../reference/rescan_file_index.html">rescan_file_index</a></span><span class="op">(</span></span>
<span>  roi_folder <span class="op">=</span> <span class="st">"/data/ifcb/raw"</span>,</span>
<span>  csv_folder <span class="op">=</span> <span class="st">"/data/ifcb/classified"</span>,</span>
<span>  output_folder <span class="op">=</span> <span class="st">"/data/ifcb/manual"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Q: Where is the cache file stored?</strong></p>
<p>A: In the same config directory as your settings:</p>
<ul>
<li>
<strong>Linux</strong>:
<code>~/.config/R/ClassiPyR/file_index.json</code>
</li>
<li>
<strong>macOS</strong>:
<code>~/Library/Preferences/org.R-project.R/R/ClassiPyR/file_index.json</code>
</li>
<li>
<strong>Windows</strong>:
<code>%APPDATA%/R/config/R/ClassiPyR/file_index.json</code>
</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="error-messages">Error Messages<a class="anchor" aria-label="anchor" href="#error-messages"></a>
</h2>
<table class="table">
<colgroup>
<col width="41%">
<col width="58%">
</colgroup>
<thead><tr class="header">
<th>Error</th>
<th>Solution</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>“ROI file not found”</td>
<td>Check ROI Data Folder path; ensure <code>.roi</code> files use IFCB
naming and click Sync</td>
</tr>
<tr class="even">
<td>“ADC file not found”</td>
<td>ADC file must be alongside ROI file</td>
</tr>
<tr class="odd">
<td>“Python not available”</td>
<td>Only affects <code>.mat</code> export. Switch to SQLite in Settings,
or run <code><a href="https://europeanifcbgroup.github.io/iRfcb/reference/ifcb_py_install.html" class="external-link">iRfcb::ifcb_py_install()</a></code>
</td>
</tr>
<tr class="even">
<td>“Error loading class list”</td>
<td>Check file format (.mat or .txt)</td>
</tr>
<tr class="odd">
<td>“No samples found”</td>
<td>Check ROI Data Folder configuration</td>
</tr>
<tr class="even">
<td>App fails to start</td>
<td>Try <code>run_app(reset_settings = TRUE)</code> to clear saved
settings</td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="section level2">
<h2 id="performance-tips">Performance Tips<a class="anchor" aria-label="anchor" href="#performance-tips"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p><strong>File index cache</strong> - The app caches folder scan
results for fast startup. Click Sync only when you’ve added new
data.</p></li>
<li><p><strong>Use pagination</strong> - Lower images per page for
faster loading</p></li>
<li><p><strong>Filter by class</strong> - Reduces rendering
load</p></li>
<li><p><strong>Close other apps</strong> - Image extraction uses
memory</p></li>
<li><p><strong>SSD storage</strong> - Faster file access</p></li>
<li><p><strong>Scheduled rescans</strong> - On servers with regularly
arriving data, use <code><a href="../reference/rescan_file_index.html">ClassiPyR::rescan_file_index()</a></code> in a cron
job to keep the cache current without manual intervention</p></li>
</ol>
<hr>
</div>
<div class="section level2">
<h2 id="getting-help">Getting Help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<ul>
<li>
<a href="https://github.com/EuropeanIFCBGroup/ClassiPyR/issues" class="external-link">GitHub
Issues</a> - Report bugs</li>
<li>
<a href="https://github.com/EuropeanIFCBGroup/iRfcb" class="external-link">iRfcb
Documentation</a> - Core dependency for IFCB data handling</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/anderstorstensson" class="external-link">Anders Torstensson</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
