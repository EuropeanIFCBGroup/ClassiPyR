<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>User Guide • ClassiPyR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="User Guide">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ClassiPyR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/user-guide.html">User Guide</a></li>
    <li><a class="dropdown-item" href="../articles/class-management.html">Class List Management</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ &amp; Troubleshooting</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/EuropeanIFCBGroup/ClassiPyR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>User Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/EuropeanIFCBGroup/ClassiPyR/blob/main/vignettes/user-guide.Rmd" class="external-link"><code>vignettes/user-guide.Rmd</code></a></small>
      <div class="d-none name"><code>user-guide.Rmd</code></div>
    </div>

    
    
<p>Complete documentation for all <code>ClassiPyR</code> features.</p>
<hr>
<div class="section level2">
<h2 id="interface-overview">Interface Overview<a class="anchor" aria-label="anchor" href="#interface-overview"></a>
</h2>
<a href="https://europeanifcbgroup.github.io/ClassiPyR/reference/figures/interface-overview.png">
<img src="https://europeanifcbgroup.github.io/ClassiPyR/reference/figures/interface-overview.png" alt="ClassiPyR interface showing the title bar, sidebar, and main image gallery area." style="max-width:100%;"></a>
<p>
<em>ClassiPyR interface showing the title bar, sidebar, and main image
gallery area. Click to enlarge.</em>
</p>
<div class="section level3">
<h3 id="title-bar">Title Bar<a class="anchor" aria-label="anchor" href="#title-bar"></a>
</h3>
<ul>
<li><strong>App name and version</strong></li>
<li>
<strong>Mode indicator</strong>: Shows current sample and mode
(Validation/Annotation)
<ul>
<li>Validation mode: Shows accuracy percentage</li>
<li>Annotation mode: Shows progress (X/Y classified)</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="sidebar">Sidebar<a class="anchor" aria-label="anchor" href="#sidebar"></a>
</h3>
<ul>
<li>
<strong>Annotator name</strong>: Your name for statistics
tracking</li>
<li>
<strong>Settings</strong>: Configure folders and options</li>
<li>
<strong>Sample selection</strong>: Year, month, status filters</li>
<li>
<strong>Navigation</strong>: Load, previous, next, random</li>
<li>
<strong>Save button</strong>: Manual save trigger</li>
</ul>
</div>
<div class="section level3">
<h3 id="main-area-tabs">Main Area (Tabs)<a class="anchor" aria-label="anchor" href="#main-area-tabs"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Image Gallery</strong>: View and annotate images</li>
<li>
<strong>Summary Table</strong>: Class distribution statistics</li>
<li>
<strong>Validation Statistics</strong>: Accuracy metrics and change
log</li>
</ol>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="validation-vs-annotation-mode">Validation vs Annotation Mode<a class="anchor" aria-label="anchor" href="#validation-vs-annotation-mode"></a>
</h2>
<div class="section level3">
<h3 id="validation-mode">Validation Mode<a class="anchor" aria-label="anchor" href="#validation-mode"></a>
</h3>
<ul>
<li>Activated when loading samples with existing
auto-classifications</li>
<li>Original classifications shown with confidence scores</li>
<li>Statistics track how many you’ve changed</li>
<li>Accuracy percentage calculated</li>
</ul>
</div>
<div class="section level3">
<h3 id="annotation-mode">Annotation Mode<a class="anchor" aria-label="anchor" href="#annotation-mode"></a>
</h3>
<ul>
<li>Activated for samples without classifications</li>
<li>All images start as “unclassified”</li>
<li>Progress shows classified vs remaining</li>
<li>Validation statistics tab shows annotation progress instead</li>
</ul>
</div>
<div class="section level3">
<h3 id="samples-with-both-modes">Samples with Both Modes<a class="anchor" aria-label="anchor" href="#samples-with-both-modes"></a>
</h3>
<p>Some samples may have both manual annotations AND
auto-classifications (e.g., you previously annotated a sample, then ran
a classifier on it). For these samples:</p>
<ul>
<li>The sample dropdown shows ✎✓ indicator</li>
<li>When loaded, you can switch between modes using the button in the
header</li>
<li>Each mode maintains its own state independently</li>
</ul>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="working-with-images">Working with Images<a class="anchor" aria-label="anchor" href="#working-with-images"></a>
</h2>
<div class="section level3">
<h3 id="image-cards">Image Cards<a class="anchor" aria-label="anchor" href="#image-cards"></a>
</h3>
<p>Each image card displays:</p>
<ul>
<li>The plankton image</li>
<li>ROI number</li>
<li>Classification score (if available)</li>
<li>Original class (if relabeled)</li>
</ul>
<p><strong>Border colors:</strong></p>
<ul>
<li>Default (gray): Unchanged</li>
<li>Yellow: Relabeled in this session</li>
<li>Blue: Currently selected</li>
</ul>
<a href="https://europeanifcbgroup.github.io/ClassiPyR/reference/figures/image-card-states.png">
<img src="https://europeanifcbgroup.github.io/ClassiPyR/reference/figures/image-card-states.png" alt="Image card border colors: gray (unchanged), yellow (relabeled), blue (selected)." style="max-width:80%;"></a>
<p>
<em>Image card border colors: gray (unchanged), yellow (relabeled), blue
(selected). Click to enlarge.</em>
</p>
</div>
<div class="section level3">
<h3 id="selecting-images">Selecting Images<a class="anchor" aria-label="anchor" href="#selecting-images"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Method</th>
<th>Action</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Click</td>
<td>Toggle single image selection</td>
</tr>
<tr class="even">
<td>Drag</td>
<td>Draw rectangle to select multiple</td>
</tr>
<tr class="odd">
<td>Select All</td>
<td>Select all images in current filter</td>
</tr>
<tr class="even">
<td>Deselect</td>
<td>Clear all selections</td>
</tr>
</tbody>
</table>
<a href="https://europeanifcbgroup.github.io/ClassiPyR/reference/figures/drag-select.png">
<img src="https://europeanifcbgroup.github.io/ClassiPyR/reference/figures/drag-select.png" alt="Drag-select: draw a rectangle to select multiple images at once." style="max-width:100%;"></a>
<p>
<em>Drag-select: draw a rectangle to select multiple images at once.
Click to enlarge.</em>
</p>
</div>
<div class="section level3">
<h3 id="relabeling">Relabeling<a class="anchor" aria-label="anchor" href="#relabeling"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Select target images</li>
<li>Choose new class in “Relabel to” dropdown</li>
<li>Click <strong>Relabel</strong>
</li>
</ol>
<p>The dropdown supports type-ahead search - just start typing the class
name.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="measuring-images">Measuring Images<a class="anchor" aria-label="anchor" href="#measuring-images"></a>
</h2>
<p>The measure tool allows you to measure distances in images.</p>
<div class="section level3">
<h3 id="using-the-measure-tool">Using the Measure Tool<a class="anchor" aria-label="anchor" href="#using-the-measure-tool"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Click the <strong>Measure</strong> button (ruler icon) in the
toolbar to activate measure mode</li>
<li>Click and drag on any image to draw a measurement line</li>
<li>The distance is displayed in both micrometers (µm) and pixels</li>
<li>Click elsewhere on the image to clear the measurement</li>
<li>Click the Measure button again to deactivate measure mode</li>
</ol>
<a href="https://europeanifcbgroup.github.io/ClassiPyR/reference/figures/measure-tool.png">
<img src="https://europeanifcbgroup.github.io/ClassiPyR/reference/figures/measure-tool.png" alt="Measure tool showing distance in micrometers and pixels." style="max-width:60%;"></a>
<p>
<em>Measure tool showing distance in micrometers and pixels. Click to
enlarge.</em>
</p>
</div>
<div class="section level3">
<h3 id="configuring-scale">Configuring Scale<a class="anchor" aria-label="anchor" href="#configuring-scale"></a>
</h3>
<p>The default scale is 3.4 pixels per micrometer (standard for IFCB).
To adjust:</p>
<ol style="list-style-type: decimal">
<li>Open <strong>Settings</strong> (gear icon)</li>
<li>Find <strong>Pixels per Micrometer</strong> field</li>
<li>Enter your instrument’s calibration value</li>
<li>Click <strong>Save Settings</strong>
</li>
</ol>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="classification-sources">Classification Sources<a class="anchor" aria-label="anchor" href="#classification-sources"></a>
</h2>
<p><code>ClassiPyR</code> supports multiple classification input
formats.</p>
<div class="section level3">
<h3 id="csv-files">CSV Files<a class="anchor" aria-label="anchor" href="#csv-files"></a>
</h3>
<p>Standard classification CSV output. Required columns:</p>
<ul>
<li>
<code>file_name</code>: Image filename (e.g.,
<code>D20230101T120000_IFCB134_00001.png</code>)</li>
<li>
<code>class_name</code>: Predicted class name</li>
</ul>
<p>Optional columns:</p>
<ul>
<li>
<code>score</code>: Classification confidence (0-1)</li>
</ul>
<p><strong>Example CSV:</strong></p>
<pre><code>file_name,class_name,score
D20230101T120000_IFCB134_00001.png,Diatom,0.95
D20230101T120000_IFCB134_00002.png,Ciliate,0.87
D20230101T120000_IFCB134_00003.png,Dinoflagellate,0.72</code></pre>
<p><strong>Flexible column matching</strong>: The app searches for
columns containing “file” and “class” in their names, so variants like
<code>filename</code>, <code>image_file</code>,
<code>predicted_class</code>, or <code>class</code> will also work.</p>
<p><strong>Different CNN pipelines</strong>: If your classifier produces
different column names, rename them to <code>file_name</code> and
<code>class_name</code>, or contact us to add support for your
format.</p>
<p>Files are searched recursively in the Classification Folder.</p>
</div>
<div class="section level3">
<h3 id="matlab-classifier-output">MATLAB Classifier Output<a class="anchor" aria-label="anchor" href="#matlab-classifier-output"></a>
</h3>
<p>Files matching <code>*_class*.mat</code> pattern containing:</p>
<ul>
<li>
<code>roinum</code>: ROI numbers</li>
<li>
<code>TBclass_above_threshold</code>: With threshold</li>
<li>
<code>TBclass</code>: Without threshold</li>
</ul>
<p><strong>Threshold option</strong>: Enable in Settings to include
unclassified predictions below confidence threshold.</p>
<blockquote>
<p><strong>Note</strong>: Reading MATLAB classifier output requires
Python (via iRfcb).</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="existing-annotations">Existing Annotations<a class="anchor" aria-label="anchor" href="#existing-annotations"></a>
</h3>
<p>Previously saved annotations (in output folder) are automatically
detected and can be resumed.</p>
<blockquote>
<p><strong>Note</strong>: Reading existing .mat annotations requires
Python (via iRfcb).</p>
</blockquote>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="output-files">Output Files<a class="anchor" aria-label="anchor" href="#output-files"></a>
</h2>
<p>When you save, the app creates:</p>
<div class="section level3">
<h3 id="annotation-mat-file">Annotation MAT File<a class="anchor" aria-label="anchor" href="#annotation-mat-file"></a>
</h3>
<p><code>output/[sample_name].mat</code></p>
<p>MATLAB-compatible format with:</p>
<ul>
<li>
<code>classlist</code>: ROI numbers and class indices</li>
<li>Compatible with <a href="https://github.com/hsosik/ifcb-analysis" class="external-link">ifcb-analysis</a>
toolbox</li>
</ul>
<blockquote>
<p><strong>Note</strong>: Saving MAT files requires Python with
scipy.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="statistics-files">Statistics Files<a class="anchor" aria-label="anchor" href="#statistics-files"></a>
</h3>
<p><code>output/validation_statistics/[sample_name]_validation_stats.csv</code></p>
<ul>
<li>Summary: total, correct, incorrect, accuracy</li>
</ul>
<p><code>output/validation_statistics/[sample_name]_validation_detailed.csv</code></p>
<ul>
<li>Per-image: original class, validated class, correct flag</li>
</ul>
</div>
<div class="section level3">
<h3 id="organized-pngs">Organized PNGs<a class="anchor" aria-label="anchor" href="#organized-pngs"></a>
</h3>
<p><code>png_output/[class_name]/[image_files]</code></p>
<p>Images organized into class folders for training CNN models or other
classifiers.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="settings-reference">Settings Reference<a class="anchor" aria-label="anchor" href="#settings-reference"></a>
</h2>
<div class="section level3">
<h3 id="folder-paths">Folder Paths<a class="anchor" aria-label="anchor" href="#folder-paths"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Setting</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Classification Folder</td>
<td>Source of CSV/MAT classifications</td>
</tr>
<tr class="even">
<td>ROI Data Folder</td>
<td>IFCB raw files (ROI/ADC/HDR)</td>
</tr>
<tr class="odd">
<td>Output Folder</td>
<td>Where MAT and CSV output goes</td>
</tr>
<tr class="even">
<td>PNG Output Folder</td>
<td>Where organized images go</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="python-configuration">Python Configuration<a class="anchor" aria-label="anchor" href="#python-configuration"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Setting</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>Python Virtual Environment Path</td>
<td>Path to venv with scipy installed</td>
</tr></tbody>
</table>
<p>The venv path can also be specified when launching the app:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_app.html">run_app</a></span><span class="op">(</span>venv_path <span class="op">=</span> <span class="st">"/path/to/your/venv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="classifier-options">Classifier Options<a class="anchor" aria-label="anchor" href="#classifier-options"></a>
</h3>
<p><strong>Apply classification threshold</strong>: When loading MATLAB
classifier output, use <code>TBclass_above_threshold</code> (checked) or
<code>TBclass</code> (unchecked).</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="statistics-and-reporting">Statistics and Reporting<a class="anchor" aria-label="anchor" href="#statistics-and-reporting"></a>
</h2>
<div class="section level3">
<h3 id="summary-table-tab">Summary Table Tab<a class="anchor" aria-label="anchor" href="#summary-table-tab"></a>
</h3>
<p>Shows class distribution:</p>
<ul>
<li>Class name</li>
<li>Image count</li>
<li>Average/min/max confidence scores</li>
</ul>
</div>
<div class="section level3">
<h3 id="validation-statistics-tab">Validation Statistics Tab<a class="anchor" aria-label="anchor" href="#validation-statistics-tab"></a>
</h3>
<p><strong>Classification Performance</strong>:</p>
<ul>
<li>Total images</li>
<li>Correct/incorrect counts</li>
<li>Overall accuracy</li>
<li>Per-class breakdown</li>
</ul>
<p><strong>Changes Made</strong>:</p>
<ul>
<li>Table of all relabeling actions</li>
<li>Original class → New class</li>
</ul>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="session-cache">Session Cache<a class="anchor" aria-label="anchor" href="#session-cache"></a>
</h2>
<p>The app maintains a session cache:</p>
<ul>
<li>Switching samples saves work automatically</li>
<li>Returning to a sample restores your changes</li>
<li>Cache persists until you close the app</li>
</ul>
<p><strong>Note</strong>: Always click Save before closing for permanent
storage.</p>
<hr>
</div>
<div class="section level2">
<h2 id="settings-persistence">Settings Persistence<a class="anchor" aria-label="anchor" href="#settings-persistence"></a>
</h2>
<p><code>ClassiPyR</code> stores your settings in a configuration file
that follows R standards:</p>
<ul>
<li>
<strong>Linux</strong>:
<code>~/.local/share/ClassiPyR/settings.json</code>
</li>
<li>
<strong>macOS</strong>:
<code>~/Library/Application Support/ClassiPyR/settings.json</code>
</li>
<li>
<strong>Windows</strong>:
<code>%LOCALAPPDATA%/ClassiPyR/settings.json</code>
</li>
</ul>
<p>Settings are loaded automatically when you start the app, so your
folder paths, class list location, and Python venv path are remembered
between sessions. Settings can be reset by specifying
<code>run_app(reset_settings = TRUE)</code>.</p>
<hr>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p><code>ClassiPyR</code> relies on <strong><a href="https://github.com/EuropeanIFCBGroup/iRfcb" class="external-link">iRfcb</a></strong> for
all IFCB data operations:</p>
<ul>
<li>Extracting images from ROI files</li>
<li>Reading ADC metadata (dimensions, timestamps)</li>
<li>Reading and writing MATLAB .mat files</li>
<li>Class list handling</li>
</ul>
<p>iRfcb is installed automatically as a dependency when you install
<code>ClassiPyR</code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/anderstorstensson" class="external-link">Anders Torstensson</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
