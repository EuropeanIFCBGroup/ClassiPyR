% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sample_saving.R
\name{save_sample_annotations}
\alias{save_sample_annotations}
\title{Save sample annotations}
\usage{
save_sample_annotations(
  sample_name,
  classifications,
  original_classifications,
  changes_log,
  temp_png_folder,
  output_folder,
  png_output_folder,
  roi_folder,
  class2use_path,
  class2use = NULL,
  annotator = "Unknown",
  adc_folder = NULL,
  save_format = "sqlite",
  db_folder = get_default_db_dir(),
  export_statistics = TRUE
)
}
\arguments{
\item{sample_name}{Sample name (e.g., "D20230101T120000_IFCB134")}

\item{classifications}{Current classifications data frame}

\item{original_classifications}{Original classifications data frame (for comparison)}

\item{changes_log}{Changes log data frame from \code{\link{create_empty_changes_log}}}

\item{temp_png_folder}{Path to temporary folder with extracted PNG images}

\item{output_folder}{Output folder path for MAT files and statistics}

\item{png_output_folder}{PNG output folder path (organized by class)}

\item{roi_folder}{ROI folder path (for ADC file location, used as fallback)}

\item{class2use_path}{Path to class2use file}

\item{class2use}{Character vector of class names. When NULL (default), loaded
from \code{class2use_path}.}

\item{annotator}{Annotator name for statistics}

\item{adc_folder}{Direct path to the ADC folder. When provided, this is used
instead of constructing the path via \code{\link{get_sample_paths}}.
This supports non-standard folder structures.}

\item{save_format}{One of \code{"sqlite"} (default), \code{"mat"}, or
\code{"both"}. Controls which backend(s) are written.}

\item{db_folder}{Path to the database folder for SQLite storage. Defaults to
\code{\link{get_default_db_dir}()}. Should be a local filesystem path,
not a network drive.}

\item{export_statistics}{Logical. When \code{TRUE} (default), validation
statistics CSV files are written to a \code{validation_statistics/}
subfolder inside \code{output_folder}. Set to \code{FALSE} to skip this
export, e.g. when annotating from scratch.}
}
\value{
TRUE on success, FALSE on failure
}
\description{
Saves the current annotations for a sample. By default annotations are
stored in a local SQLite database (\code{annotations.sqlite} in the database
folder). Optionally, a MATLAB-compatible \code{.mat} file can also be
written (requires Python + scipy).
}
\examples{
\dontrun{
# Save annotations for a sample (default: SQLite)
success <- save_sample_annotations(
  sample_name = "D20230101T120000_IFCB134",
  classifications = current_classifications,
  original_classifications = original_classifications,
  changes_log = changes_log,
  temp_png_folder = "/tmp/png",
  output_folder = "/data/manual",
  png_output_folder = "/data/png_output",
  roi_folder = "/data/raw",
  class2use_path = "/data/class2use.mat",
  annotator = "John Doe"
)
}
}
